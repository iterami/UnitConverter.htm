'use strict';

function calculate(group){
    if(group.indexOf('-') !== -1){
        group = group.substring(
          0,
          group.indexOf('-')
        );
    }

    const input = document.getElementById(group + '-input').value;
    const output = document.getElementById(group + '-output').value;
    let value = document.getElementById(group + '-value').value;

    value *= power(
      value,
      group + '-input-power'
    );
    const input_rounded = core_round({
      'number': value,
    });

    if(group.indexOf('Temperature') !== -1){
        let formulae = temperature_formulae(value);

        if(input !== units['Temperature']['_default']){
            value = formulae[input];
            formulae = temperature_formulae(value);
        }

        value = formulae[units['Temperature']['_default']][output];

    }else if(input !== output){
        if(input !== units[group]['_default']){
            value /= units[group][input];
        }

        value *= units[group][output];
    }

    value /= power(
      value,
      group + '-output-power'
    );
    const value_rounded = core_round({
      'number': value,
    });
    let input_unit = input.substring(
      input.indexOf('[') + 1,
      input.indexOf(']')
    );
    if(input_unit.length === 0){
        input_unit = input;
    }
    let output_unit = output.substring(
      output.indexOf('[') + 1,
      output.indexOf(']')
    );
    if(output_unit.length === 0){
        output_unit = output;
    }

    document.getElementById(group + '-result').value = core_storage_data['rounding']
      ? value_rounded
      : value;
    document.title = value_rounded + ' ' + output_unit + ' ≈ ' + input_rounded + ' ' + input_unit;
}

function calculate_all(){
    for(const type in units){
        calculate(type);
    }
}

function power(value, id){
    let power = +document.getElementById(id).value;
    if(Number.isNaN(power)){
        power = 0;
    }
    return Math.pow(
      10,
      power
    );
}

function repo_init(){
    core_repo_init({
      'globals': {
        'units': {
          'Acceleration': {
            '_default': 'metre per second squared [m/s²]',
            'foot per second squared [ft/s²]': 3.280839895,
            'gal [Gal]': 100,
            'metre per hour squared [m/h²]': 3600,
            'metre per second squared [m/s²]': 1,
            'miles per hour squared [mph²]': 1 / .44704,
            'standard gravity [ɡ₀]': 1 / 9.80665,
          },
          'Angle': {
            '_default': 'radian [rad]',
            'arcminute [′]': 180 / Math.PI * 60,
            'arcsecond [″]': 180 / Math.PI * 3600,
            'degree [°]': 180 / Math.PI,
            'Furman': (180 / Math.PI / 360) * 65536,
            'gradian [gon]': 180 / Math.PI / 360 * 400,
            'hexacontade': 180 / Math.PI / 6,
            'mil': 1000,
            'octant': 180 / Math.PI / 45,
            'quadrant': 180 / Math.PI / 90,
            'radian [rad]': 1,
            'sextant': 180 / Math.PI / 60,
            'sign': 180 / Math.PI / 30,
            'turn': 180 / Math.PI / 360,
          },
          'Area': {
            '_default': 'metres squared [m²]',
            'acre [ac]': 1 / 4046.86,
            'are [a]': .01,
            'barn [b]': .0000000000000000000000000001,
            'brass': .107639,
            'bu [歩]': 1 / 3.306,
            'cawnie': 1 / 5349,
            'cent': 1 / 40.4686,
            'chō [町]': 1 / 9917.36,
            'cuerda': 1 / 3930.395625,
            'darat': .000125,
            'decimal': 1 / 40.4686,
            'desiatina (official)': 1 / 10925.4,
            'desiatina (proprietor\'s)': 1 / 14567.2,
            'feet squared [ft²]': 10.7639,
            'gō [合]': 1 / .3306,
            'ground': 1 / 203,
            'hectare [ha]': .0001,
            'hold': 1 / 4316,
            'inches squared [in²]': 1550.0031,
            'jitro': 1 / 5756,
            'jō [畳]': 1 / 1.653,
            'korec': 1 / 2878,
            'lán': 1 / 172680,
            'marabba': 1 / 101171,
            'měřice': 1 / 1999,
            'metres squared [m²]': 1,
            'miles squared [mi²]': 1 / 2589990,
            'morgen': .0001 / .856532,
            'plaza': .00015625,
            'quinaria': 2384.6201538,
            'rood': 1 / 1011.71,
            'se [畝]': 1 / 99.1736,
            'shaku [勺]': 1 / .03306,
            'strema': .001,
            'tan [段, 反]': 1 / 991.736,
            'township': 1 / 93239571.972095996141,
            'tsubo [坪]': 1 / 3.306,
            'yards squared [yd²]': .83612736,
          },
          'Density': {
            '_default': 'grams per cubic metre [g/m³]',
            'grams per cubic metre [g/m³]': 1,
            'grams per litre [g/l]': 1000,
            'metric tons per cubic metre [t/m³]': 1000000,
            'pounds per cubic inch [lb/in³]': 1 / 27679900,
            'pounds per cubic foot [lb/ft³]': 1 / 16018.46,
            'slugs per cubic foot': 1 / 515378.8184,
            'slugs per cubic yard': 1 / 19088.1044,
          },
          'Energy': {
            '_default': 'joule [J]',
            'electron volt [eV]': 6241509343300000000,
            'erg': 10000000,
            'foe': 1 / 1e44,
            'foot-pound [ft·lb]': 1 / 1.3558179483314,
            'gallon gasoline equivalent': 1 / 121320000,
            'international steam table calorie [calᵢₜ]': 1 / 4.1868,
            'joule [J]': 1,
            'mean BTU [Btuₘₑₐₙ]': 1 / 1055.87,
            'mean calorie [calₘₑₐₙ]': 1 / 4.19002,
            'quad': 1 / 1.055e18,
            'thermochemical BTU [Btuₜₕ]': 1 / 1054.35026444,
            'thermochemical calorie [calₜₕ]': 1 / 4.184,
            'ton of TNT': 1 / 4184000000,
            'watt-hour [W·h]': 1 / 3600,
          },
          'Force': {
            '_default': 'newton [N]',
            'dyne [dyn]': 100000,
            'gram-force [gf]': 1 / .00980665,
            'kip': 1 / 4448.2216,
            'long ton-force': .224809 / 2240,
            'newton [N]': 1,
            'ounce-force [ozf]': 3.59694310194,
            'pond': 1 / .009806649999788,
            'pound-force [lbf]': .224809,
            'poundal [pdl]': 7.23301,
            'short ton-force': .224809 / 2000,
            'sthène [sn]': .001,
            'tonne-force [tf]': 1 / 9806.65,
          },
          'Fuel': {
            '_default': 'metres per litre [m/l]',
            'litres per 100 kilometres [l/100km]': 100000,
            'metres per litre [m/l]': 1,
            'miles per imperial gallon [MPG]': .00282481,
            'miles per US gallon [MPG]': .00235215,
          },
          'Illuminance': {
            '_default': 'lux [lx]',
            'foot-candle [fc]': .09290304,
            'lux [lx]': 1,
            'phot [ph]': .0001,
            'skot [sk]': 3141.69,
          },
          'Length': {
            '_default': 'metre [m]',
            'ald': 1 / 1.6,
            'alen': 1 / .6277,
            'aln': 1 / .5938,
            'Altuve': 1 / .0254 / 65,
            'ångström [Å]': 10000000000,
            'Aṅgula': 1 / .01763,
            'anne': 1 / 1.188,
            'archine': 1 / .7112,
            'arpent': 1 / 58.47109,
            'astronomical unit [au]': 1 / 149597870700,
            'barleycorn': 118.11,
            'bloit': 1 / .0254 / 42333.6,
            'bu [分]': 1 / 330,
            'cable': 1 / .0254 / 7200,
            'cana': 1 / 1.57,
            'chain [ch]': 1 / 20.1168,
            'chi [尺]': 3,
            'chō [町]': 3.3 / 360,
            'covid': 1 / .464,
            'cubit': 1 / .4572,
            'digit': 1 / .0254 / .75,
            'ell (Danish)': 1 / .941318,
            'ell (Flemish)': 1 / .686,
            'ell (French)': 1 / 1.372,
            'ell (German)': 1 / .579,
            'ell (Polish)': 1 / .787,
            'ell (Scottish)': 1 / .635,
            'elle (Kuunar)': 1 / .5334,
            'faden': 1 / 2.1336,
            'fall': 1 / 5.6479,
            'fathom': 1 / .0254 / 72,
            'foot [ft]': 1 / .0254 / 12,
            'foute': 1 / .3048,
            'furlong': 1 / .0254 / 7920,
            'girah': 1 / .05715,
            'Gunter\'s chain': 1 / .0254 / 792,
            'Hammer unit': (1 / .0254 / 12) * 16,
            'hand [h]': 1 / .0254 / 4,
            'hiro [尋]': .55,
            'Hubble length': 1 / (9460730472580800 * 14400000000),
            'inch [in]': 1 / .0254,
            'jacktan': 1 / 3.658,
            'Jimmy Griffin Snow Index': 1 / .0254 / 4,
            'jō [丈]': .33,
            'jow': 1 / .00635,
            'kanejaku [曲尺]': 3.3,
            'ken [間]': .55,
            'kos': 1 / 3075,
            'lár': 1 / .0254 / 190080,
            'látro': 1 / 1.917,
            'league': 9.3701 / 216000,
            'light-second': 1 / 299792458,
            'light-year [ly]': 1 / 9460730472580800,
            'ligne': 1 / .0022558291,
            'link [l.]': 1 / .201168,
            'loket (Bohemia)': 1 / .593,
            'loket (Moravia)': 1 / .594,
            'loket (Silesia)': 1 / .579,
            'lunar distance [LD]': 1 / 384402000,
            'megalithic inch': 1 / .0254 / .816,
            'megalithic rod': 1 / .0254 / 81.6,
            'megalithic yard': 1 / .0254 / 32.64,
            'metre [m]': 1,
            'metric foot': 1 / .3,
            'metric inch': 1 / .025,
            'mil': 39370.1,
            'mile [mi]': 1 / .0254 / 63360,
            'míle (Bohemia)': 1 / 7003,
            'míle (Silesia)': 1 / 6483,
            'Minecraft chunk (horizontal)': .0625,
            'Minecraft chunk (vertical)': .00390625,
            'mō [毛, 毫]': 33000,
            'nail': 1 / .0254 / .25,
            'nautical league': 1 / 5556,
            'nautical mile [nmi]': 1 / 1852,
            'ohra': 1 / .571,
            'palm': 1 / .0254 / 3,
            'parsec [pc]': 1 / 30856775800000000,
            'peninkulma': 1 / 10688,
            'perche': 1 / 6.497,
            'pic': 1 / .582,
            'pied': 1 / .32485,
            'pik': 1 / .578,
            'potrzebie': 1 / .0022633484517438173216473,
            'rack unit [U]': 1 / .0254 / 1.75,
            'rahf': 1 / .0254 / 46.46,
            'ranga': 1 / .0254 / 38.016,
            'ri [里]': 3.3 / 12960,
            'rin [厘]': 3300,
            'sáh': 1 / 1.778,
            'Scots mile': 1 / 5.6479 / 320,
            'shackle': 1 / .0254 / 1080,
            'shaku [尺]': 3.3,
            'Sheppey': 1 / .0254 / 55440,
            'siriometer [sir]': 1 / 149597870700000000,
            'Skyrim unit': 1 / .0254 / .5625,
            'smoot': 1 / 1.702,
            'spat [S]': .00000001,
            'stick': 1 / .0254 / 2,
            'stopa (Bohemia)': 1 / .2965,
            'stopa (Moravia)': 1 / .284,
            'stopa (Silesia)': 1 / .2895,
            'story': 1 / 3.3,
            'sun [寸]': 33,
            'survey foot (India)': 1 / .3047996,
            'survey foot (US)': 3937 / 1200,
            'thou': 1 / .0000254,
            'toise': 1 / 1.9488,
            'unglie': 1 / .0254 / .75,
            'vara': 1 / .0254 / 33.384,
            'wiffle': 1 / .089,
            'yard [yd]': 1 / .0254 / 36,
          },
          'Level': {
            '_default': 'decibel [dB]',
            'bel [B]': .1,
            'decibel [dB]': 1,
            'neper [Np]': 1 / 8.68589,
          },
          'Luminous<br>Intensity': {
            '_default': 'candela [cd]',
            'candela [cd]': 1,
            'candlepower [cp]': 1 / .981,
            'Carcel': 1 / 9.74,
            'Hefnerkerze': 1 / .920,
            'Violle': 1 / 20.17,
          },
          'Magnetism': {
            '_default': 'tesla [T]',
            'gamma [γ]': 1000000000,
            'gauss [G]': 10000,
            'tesla [T]': 1,
          },
          'Mass': {
            '_default': 'gram [g]',
            'abucco': 1 / 196.44,
            'adowlie': 1 / 1982,
            'Aeginetan talent': 1 / 37000,
            'agiro': 1 / 392.88,
            'atomic mass unit (AMU)': 1 / 1.6605390402e-24,
            'Attic talent': 1 / 25800,
            'bazla': 1 / 15525,
            'bisauli [बिसौलि]': 1 / 1166.25,
            'biza': 1 / 1571.52,
            'boṛi [बोड़ि]': 1 / 583.125,
            'bundle': 1 / 317.5,
            'carat [ct]': 5,
            'cental': .0220462262185,
            'couric': 1 / 453.59237 / 2.5,
            'cullingey': 1 / 5.265,
            'dharni [धार्नि]': 1 / 2332.5,
            'dirhem (Ottoman)': 1 / 3.20725,
            'dram [dr]': 1 / 1.7718451953125,
            'dram apothecaries [dr ap]': 1 / 3.8879346,
            'duella': 1 / 9.056,
            'Dutch cask': 1 / 50802.34544,
            'esterling': .70548,
            'firkin': 1 / 40823.3133,
            'fun [分]': 4 / 1.5,
            'funt [фунт]': 1 / 409.5,
            'garce': 1 / 4198518,
            'grain': 1 / .06479891,
            'gram [g]': 1,
            'heavy adowlie': 1 / 2031,
            'hocsep': 1 / 60000,
            'hundredweight [cwt]': 1 / 50802.34544,
            'hyakume [百目]': 1 / 375,
            'kanme [貫目]': 1 / 3750,
            'keel': 1 / 21540194.46656,
            'kin [斤]': 1 / 600,
            'kula': 1 / 11165,
            'large sack': 1 / 101604.69088,
            'libra': 1 / 453.59237 / 1.014286,
            'long ton': 1 / 453.59237 / 2240,
            'mane': 1 / (453.59237 * 2.0071),
            'maund': 1 / 37324.2,
            'maunee': 1 / 746484,
            'metric tonne [t]': .00001,
            'mina': 1 / 571,
            'momme [匁]': 1 / 3.75,
            'munjandie': 1 / .25919564,
            'oka (Ottoman)': 1 / 1282.9,
            'ounce [oz]': 1 / (453.59237 / 16),
            'passeree': 1 / 4665.5,
            'pāu [पाउ]': 1 / 194.375,
            'pennyweight [dwt]': 1 / 1.55517384,
            'Planck mass [mₚ]': 1 / .0000217645,
            'point': 500,
            'pood [пуд]': 1 / 16380,
            'pound [lb]': 1 / 453.59237,
            'quarter [qtr]': 1 / 12700.58636,
            'room': 1 / 7112328.360594,
            'rotal': 1 / 507.5,
            'sarpler': 1 / 1016046.9088,
            'scruple [℈]': 1 / 1.2959782,
            'seer (Afghanistan)': 1 / 7066,
            'seer (India)': 1 / 933.10,
            'ship load': 1 / 430803889.3312,
            'short ton': 1 / 453.59237 / 2000,
            'slug': 1 / 14593.9029388,
            'stone [st]': 1 / 6350.29318,
            'teccalis': 1 / 15.7152,
            'tod': 1 / 12700.58636,
            'ton longweight': 1 / 453.59237 / 2400,
            'troy grain [gr]': 1 / .06479891,
            'troy ounce [oz t]': 1 / 31.1034768,
            'Whey (Essex)': 1 / 107047.79932,
            'zolotnik [zol.]': 1 / 4.2658,
          },
          'Mass Flow': {
            '_default': 'gram per second [g/s]',
            'gram per second [g/s]': 1,
            'pound per second [lb/s]': .00045359237,
            'slug per second': .014593903,
          },
          'Power': {
            '_default': 'watt [W]',
            'donkeypower': .004,
            'mechanical horsepower [hp]': 1 / 745.7,
            'metric horsepower [PS]': 1 / 735.49875,
            'pirate-ninja [pn]': 1 / 40.55,
            'poncelet [p]': 1 / 980.665,
            'ton of refrigeration [TR]': 1 / 3516.8525,
            'watt [W]': 1,
          },
          'Pressure': {
            '_default': 'pascal [Pa]',
            'bar': .00001,
            'pascal [Pa]': 1,
            'pièze [pz]': .001,
            'pound-force per square inch absolute [psia]': .000145038,
            'standard atmosphere [atm]': 1 / 101325,
            'technical atmosphere [at]': 1 / 98066.5,
            'torr [Torr]': 760 / 101325,
            'Vickers pyramid number [HV]': 1 / 9807000,
          },
          'Radioactivity<br>Absorbed Dose': {
            '_default': 'gray [Gy]',
            'gray [Gy]': 1,
            'joules per kilogram [J/kg]': .01,
            'rad': 100,
          },
          'Radioactivity<br>Dose Equivalent': {
            '_default': 'sievert [Sv]',
            'banana equivalent dose [BED]': 10000000,
            'sievert [Sv]': 1,
            'röntgen equivalent man [rem]': 100,
          },
          'Radioactivity<br>Specific Activity': {
            '_default': 'becquerel [Bq]',
            'becquerel [Bq]': 1,
            'curie [Ci]': 1 / 3.7e10,
            'rutherford [Rd]': 1e-6,
          },
          'Solid Angle': {
            '_default': 'steradian [sr]',
            'spat [sp]': 1 / (Math.PI * 4),
            'square degree [deg²]': Math.pow(180 / Math.PI, 2),
            'steradian [sr]': 1,
          },
          'Speed': {
            '_default': 'metres per second [m/s]',
            'Bubnoff unit [B]': 31556908800000,
            'feet per hour [ft/h]': 1 / .0254 / 12 * 3600,
            'feet per minute [ft/min]': 1 / .0254 / 12 * 60,
            'feet per second [ft/s]': 1 / .0254 / 12,
            'furlongs per fortnight': 6012.8727971,
            'inches per hour [in/h]': 141732.36,
            'inches per minute [in/min]': 2362.206,
            'inches per second [in/s]': 1 / .0254,
            'knots': 1.94384,
            'mach [M]': 1 / 340.29,
            'metres per hour [m/h]': 3600,
            'metres per minute [m/min]': 60,
            'metres per second [m/s]': 1,
            'miles per hour [mph]': 1 / .0254 / 63360 * 3600,
            'miles per minute [mi/min]': 1 / .0254 / 63360 * 60,
            'miles per second [mi/s]': 1 / .0254 / 63360,
            'speed of light [c]': 1 / 299792458,
            'yards per hour [yd/h]': 1 / .0254 / 36 * 3600,
            'yards per minute [yd/min]': 1 / .0254 / 36 * 60,
            'yards per second [yd/s]': 1 / .0254 / 36,
          },
          'Temperature': {
            '_default': 'Celsius [°C]',
            'Amonton': void 0,
            'Barnsdorf': void 0,
            'Beaumuir': void 0,
            'Bénart': void 0,
            'Bergen': void 0,
            'Brisson': void 0,
            'Celsius [°C]': void 0,
            'Cimento': void 0,
            'Cruquius': void 0,
            'Dalencé': void 0,
            'Daniell': void 0,
            'De la Hire': void 0,
            'De la Ville': void 0,
            'Delisle [°D]': void 0,
            'De Luc': void 0,
            'De Lyon': void 0,
            'de Revillas': void 0,
            'de Suede': void 0,
            'de Villeneuve': void 0,
            'Du Crest': void 0,
            'Edinburgh': void 0,
            'electron volts': void 0,
            'Fahrenheit [°F]': void 0,
            'Florentine Magnum': void 0,
            'Fowler': void 0,
            'Frick': void 0,
            'Gas Mark [G]': void 0,
            'Goubert': void 0,
            'Hales': void 0,
            'Hauksbee': void 0,
            'Jacobs-Holborn': void 0,
            'Kelvin [K]': void 0,
            'La Court': void 0,
            'Lambert': void 0,
            'Lange': void 0,
            'Leiden': void 0,
            'Ludolf': void 0,
            'Mariotte': void 0,
            'Miles': void 0,
            'Murray': void 0,
            'Newton [°N]': void 0,
            'Oertel': void 0,
            'Paris': void 0,
            'Poleni': void 0,
            'Rankine [°Ra]': void 0,
            'Réaumur [°Ré]': void 0,
            'Richter': void 0,
            'Rinaldini': void 0,
            'Rømer [°Rø]': void 0,
            'Sagredo': void 0,
            'Sulzer': void 0,
            'Urist [°U]': void 0,
            'Wedgwood (modern)': void 0,
            'Wedgwood (original)': void 0,
          },
          'Time': {
            '_default': 'second [s]',
            'alautun': 1 / 1990656000000000,
            'atom': 1 / .15957446808,
            'b\'ak\'tun': 1 / 12441600000,
            'century [c.]': 1 / 3155690880,
            'day [d]': 1 / 86400,
            'day (Earth)': 1 / 86164.100352,
            'day (Jupiter)': 1 / 35730,
            'day (Mars)': 1 / 88642.6848,
            'day (Mercury)': 1 / 5067014.4,
            'day (Minecraft)': 1 / 1200,
            'day (Moon)': 1 / 2360591.5104,
            'day (Neptune)': 1 / 58000.32,
            'day (Pluto)': 1 / 551856.672,
            'day (Saturn)': 1 / 38018,
            'day (Uranus)': 1 / 62063.712,
            'day (Venus)': 1 / 20997360,
            'decade': 1 / 315569088,
            'fortnight': 1 / 1209600,
            'ghurry': 1 / 1440,
            'Great Year': 1 / 813284653593.6,
            'helek [hl]': .3,
            'hour [h]': 1 / 3600,
            'Hubble time': 1 / 454419486720000000,
            'Internet Time [.beat]': .01157,
            'k\'atun': 1 / 622080000,
            'k\'in': 1 / 86400,
            'k\'inchiltun': 1 / 99532800000000,
            'kalabtun': 1 / 4976640000000,
            'kermit': 1 / 864,
            'Martian solar day [sol]': 1 / 88775.2,
            'Minecraft tick': 20,
            'minute [min]': 1 / 60,
            'momentum': 1 / 90,
            'month (anomalistic)': 1 / 2380713.2064,
            'month (draconic)': 1 / 2351135.808,
            'month (sidereal)': 1 / 2360591.5104,
            'month (synodic)': 1 / 2551442.8015584,
            'month (tropical)': 1 / 2360584.6848,
            'piktun': 1 / 248832000000,
            'radar metre': 1 / .00000000666,
            'radar nautical mile': 1 / .000012355,
            'radar statute mile': 1 / .00001075,
            'RuneScape tick': 1 / .6,
            'Savart': 1 / 315569.088,
            'Schrute Buck': 1000 / 300,
            'second [s]': 1,
            'shake': 100000000,
            'takk': 1 / 28.8,
            'third': 60,
            'tik': 1 / 28800,
            'time unit [TU]': 1 / .001024,
            'tun': 1 / 31104000,
            'Warhol': 1 / 900,
            'week': 1 / 604800,
            'winal': 1 / 1728000,
            'year (Earth) [a]': 1 / 31556908.8,
            'year (Jupiter)': 1 / (31556908.8 * 11.86),
            'year (Mars)': 1 / (31556908.8 * 1.881),
            'year (Mercury)': 1 / (31556908.8 * .240846),
            'year (Moon)': 1 / (31556908.8 * .0748),
            'year (Neptune)': 1 / (31556908.8 * 164.8),
            'year (Pluto)': 1 / (31556908.8 * 248.1),
            'year (Saturn)': 1 / (31556908.8 * 29.46),
            'year (Uranus)': 1 / (31556908.8 * 84.01),
            'year (Venus)': 1 / (31556908.8 * .615),
            'yén': 1 / 4544294400,
          },
          'Torque': {
            '_default': 'newton metre [N·m]',
            'gram metre [g·m]': 1 / 9806.65,
            'newton metre [N·m]': 1,
            'pound-foot [lb·ft]': 1 / 1.355818,
          },
          'Volume': {
            '_default': 'litre [l]',
            'acetabulum': 1 / .068125,
            'acre-foot': 1 / 1233480,
            'adowlie': 1 / 2.509,
            'ale/beer barrel': 1 / 163.65924,
            'ale/beer firkin': 1 / 40.91481,
            'ale/beer hogshead': 1 / 245.48886,
            'amphora quadrantal': 1 / 26.16,
            'Anker': 33.8140227 / 1320,
            'arroba': 1 / 16.137,
            'Australian tablespoon': 50,
            'bath': 1 / 2200,
            'board-foot [FBM]': 1 / 2.359737225,
            'bushel (imperial)': 1 / 36.368735,
            'bushel (US)': 1 / 35.239072,
            'butt of beer': 1 / 490.97772,
            'cajuela': 1 / 16.6,
            'cash': 1 / 227.11,
            'chungah': 1 / .75768236466,
            'congius': 1 / 3.27,
            'coomb': 1 / 145.47494,
            'cord': 1 / 3624.56,
            'cord-foot [cd-ft]': 1 / 453.07,
            'cotyla': 1 / .2725,
            'cran': 1 / 170.47853205,
            'cubic inch [in³]': 61.0237440947323,
            'cubic foot [ft³]': 1 / 28.316846592,
            'cubic metre [m³]': .001,
            'cubic mile [mi³]': .000000000000239912758579,
            'cubic ton': 1 / 28.316846592 / 40,
            'cubic yard [yd³]': 1 / 764.5549,
            'culeus': 1 / 523.2,
            'cullishigay': 1 / 45.4609188,
            'cup (imperial)': 35.1950652 / 8,
            'cup (US)': 33.8140227 / 8,
            'cyathus': 1 / (3.27 / 72),
            'demiard': 1 / .284,
            'djezla': 1 / 257.4,
            'ephah [ה‎עֵיפָ]': 1 / 36.36,
            'fanega': 1 / 274,
            'fifth': 1 / .757,
            'fluid dram [fl dr]': 1 / .0035516328125,
            'fluid dram (US) [fl dr]': 1 / .0036966911953125,
            'fluid ounce (imperial) [fl oz]': 35.1950652,
            'fluid ounce (US) [fl oz]': 33.8140227,
            'fluid scruple [℈]': 1 / .00123,
            'gallon (imperial) [gal]': 35.1950652 / 160,
            'gallon (US) [gal]': 33.8140227 / 132,
            'garce (India)': 1 / 5244,
            'garce (Sri Lanka)': 1 / 5084.8,
            'gill (imperial)': 35.1950652 / 5,
            'gill (US)': 33.8140227 / 4,
            'gō [合]': 1331 / 240.1,
            'hekat': 1 / 4.8,
            'homer': 1 / 220,
            'hoppus cubic foot [h ft]': 1 / 36.0473457116,
            'hoppus ton [HT]': 1 / 1802.36728558,
            'Japanese cup': 5,
            'kinderkin': 1 / 81.82962,
            'koku [石]': 1331 / 240100,
            'korec': 1 / 93.592,
            'lambda [λ]': 1000000,
            'ligula': 1 / (3.27 / 288),
            'litre [l]': 1,
            'log': 1 / .505,
            'malter': 1 / 191,
            'maris': 1 / 30.3,
            'měřice': 1 / 70.6,
            'metretes': 1 / 37.4,
            'metric cup': 4,
            'metric fifth': 1 / .75,
            'mina': 1 / .505,
            'minim (imperial) [min]': 16893.631296,
            'minim (US) [min]': 16230.730896,
            'naggin': 5,
            'ngogn': 1 / .0022633484517438173216473,
            'octave': 1 / 73,
            'omer [ר‎עמ]': 1 / 3.636,
            'pau': 1 / .284130625,
            'peck (imperial)': 35.1950652 / 320,
            'peck (US)': 33.8140227 / 264,
            'pin': 1 / 20.457405,
            'pint (imperial) [pt]': 35.1950652 / 20,
            'pint (US) [pt]': 33.8140227 / 16,
            'puddee (Chennai)': 1 / 1.591264,
            'puddee (Government)': 1 / 1.64,
            'quart (imperial) [qt]': 35.1950652 / 40,
            'quart (US) [qt]': 33.8140227 / 32,
            'quartarius': 1 / .13625,
            'sai [才]': 1331 / 2.401,
            'seah [סאה]': 1 / 12.12,
            'sextarius': 1 / .545,
            'shaku [勺]': 1331 / 24.01,
            'shipping ton (imperial)': 1 / 1189.307556864,
            'shipping ton (US)': 1 / 1132.67386368,
            'shō [升]': 1331 / 2401,
            'shoulder': 1 / .35,
            'sydharb': 1 / 562000000000,
            'tablespoon (imperial) [tbsp]': 56.1312777,
            'tablespoon (US) [tbsp]': 67.6280454,
            'teaspoon (imperial) [tsp]': 168.393833,
            'teaspoon (US) [tsp]': 202.8841362,
            'to [斗]': 1331 / 24010,
            'tun': 1 / 981.95544,
            'urna': 1 / 13.08,
            'velt': 1 / 227.11 * 30,
            'yard of ale': 1 / 1.4206537,
          },
          'Volumetric Flow': {
            '_default': 'cubic metre per second [m³/s]',
            'cubic foot per second [ft³/s]': 1 / .028316846592,
            'cubic metre per second [m³/s]': 1,
            'gallon per second [gal/s]': .0037854118,
            'sverdrup [Sv]': .000001,
          },
        },
      },
      'info': '<a href=../Docs.htm/repos/unitconverter-htm.htm>Docs</a>',
      'storage': {
        'rounding': false,
      },
      'storage-menu': '<table><tr><td><input id=rounding type=checkbox><td>Apply Rounding</table>',
      'title': 'UnitConverter.htm',
    });

    let unittable = '';
    for(const type in units){
        let options = '';
        for(const unit in units[type]){
            if(unit === '_default'){
                continue;
            }
            options += '<option value="' + unit + '">' + unit;
        }

        unittable += '<tr><td class=right><input id="' + type + '-value" step=any type=number>*10^<input class=mini id="' + type + '-input-power" step=any type=number value=0><br><select id="' + type + '-input">' + options + '</select>'
          + '<td><button id="' + type + '" type=button>' + type + '</button>'
          + '<td class=left><input id="' + type + '-result" readonly type=text>*10^<input class=mini id="' + type + '-output-power" step=any type=number value=0><br><select id="' + type + '-output">' + options + '</select>';
    }
    document.getElementById('units').innerHTML = unittable;

    for(const type in units){
        document.getElementById(type + '-input').onchange
          = document.getElementById(type + '-input-power').oninput
          = document.getElementById(type + '-output').onchange
          = document.getElementById(type + '-output-power').oninput
          = document.getElementById(type + '-value').oninput = function(){
            calculate(this.id);
        };

        document.getElementById(type + '-output').value = units[type]['_default'];
        document.getElementById(type).onclick = function(){
            reverse(this.id);
        }
    }
}

function reverse(id){
    const input_element = document.getElementById(id + '-input');
    const output_element = document.getElementById(id + '-output');
    let temp = input_element.value;
    input_element.value = output_element.value;
    output_element.value = temp;

    const input_power_element = document.getElementById(id + '-input-power');
    const output_power_element = document.getElementById(id + '-output-power');
    temp = input_power_element.value;
    input_power_element.value = output_power_element.value;
    output_power_element.value = temp;

    calculate(id);
    document.getElementById(id + '-value').focus();
}

function temperature_formulae(value){
    return {
      'Amonton': value * 4.65116 - 239.535,
      'Barnsdorf': value * 3.80952 - 13.9683,
      'Beaumuir': value * 1.23862,
      'Bénart': value * .79661 - .398305,
      'Bergen': value * .595238 - 3.57143,
      'Brisson': value * 1.18519,
      'Celsius [°C]': {
        'Amonton': value * .215 + 51.5,
        'Barnsdorf': value * .2625 + 11 / 3,
        'Beaumuir': value / 1.23862,
        'Bénart': value * 1.25532 + .5,
        'Bergen': value * 1.68 + 6,
        'Brisson': value / 1.18519,
        'Celsius [°C]': value,
        'Cimento': value * .665 + 13.5,
        'Cruquius': value * 4.39811 + 1070.19,
        'Dalencé': value * (2 / 3) - 10,
        'Daniell': value * .247527 - 3.30028,
        'De la Hire': value * .988302 + 20.5698,
        'De la Ville': value * 1.77402 + 25.0581,
        'Delisle [°D]': (100 - value) * 1.5,
        'De Luc': value / 1.26984,
        'De Lyon': value / 1.01587,
        'de Revillas': value / -.673609334 + 148.454,
        'de Suede': value * .995999 + .040011,
        'de Villeneuve': value * (4 / 3),
        'Du Crest': value * 1.17118 - 17.0992,
        'Edinburgh': value * .386714 + 8.25,
        'electron volts': value / 11604.9669 + .0235383,
        'Fahrenheit [°F]': value * 1.8 + 32,
        'Florentine Magnum': value * 2.71186 - 25.7627,
        'Fowler': value * 2.81109 - 34,
        'Frick': value * 2.259 - 33.3,
        'Gas Mark [G]': (value - 121) / 14,
        'Goubert': value * .9,
        'Hales': value * 1.5,
        'Hauksbee': value / -.4 + 78,
        'Jacobs-Holborn': value * 7.1 + 337,
        'Kelvin [K]': value + 273.15,
        'La Court': value * .759375 + 15,
        'Lambert': value * 3.7 + 1000,
        'Lange': value * .481875 + (20.6 / 3),
        'Leiden': value + 253,
        'Ludolf': value * 1.60313 + 32,
        'Mariotte': value * 2.57069 + 24.4216,
        'Miles': value * 1.8,
        'Murray': value * 2.48 + 99,
        'Newton [°N]': value * .33,
        'Oertel': value * .9 + 32,
        'Paris': value * 1.71429 + 28,
        'Poleni': value * .151765 + 47.3529,
        'Rankine [°Ra]': (value + 273.15) * 1.8,
        'Réaumur [°Ré]': value / 1.25,
        'Richter': value * .82125 + 18,
        'Rinaldini': value * .12,
        'Rømer [°Rø]': value * 21 / 40 + 7.5,
        'Sagredo': value * 4.73934 + 100,
        'Sulzer': value * 1.57075 - 1.07547,
        'Urist [°U]': value * 1.8 + 10000,
        'Wedgwood (modern)': value / 24.8571954 - 10.8218,
        'Wedgwood (original)': value / 72.2219815 - 8.04188,
      },
      'Cimento': value * 1.50376 - 20.3008,
      'Cruquius': value * .22737 - 243.329,
      'Dalencé': value * 1.5 + 15,
      'Daniell': value * 4.03996 + 13.333,
      'De la Hire': value * 1.01184 - 20.8133,
      'De la Ville': value * .56369 - 14.125,
      'Delisle [°D]': 100 - value / 1.5,
      'De Luc': value * 1.26984,
      'De Lyon': value * 1.01587,
      'de Revillas': value / -1.48453633 + 100,
      'de Suede': value * 1.00402 - .0401717,
      'de Villeneuve': value * .75,
      'Du Crest': value * .853839 + 14.6,
      'Edinburgh': value * 2.58589 - 21.3336,
      'electron volts': value * 11604.5 - 273.15,
      'Fahrenheit [°F]': (value - 32) / 1.8,
      'Florentine Magnum': value * .36875 + 9.5,
      'Fowler': value * .355734 + 12.095,
      'Frick': value * .442674 + 14.741,
      'Gas Mark [G]': value * 14 + 121,
      'Goubert': value / .9,
      'Hales': value / 1.5,
      'Hauksbee': value / -2.5 + 31.2,
      'Jacobs-Holborn': value * .140845 - 47.4648,
      'Kelvin [K]': value - 273.15,
      'La Court': value * 1.31687 - 19.7531,
      'Lambert': value * .27027 - 270.27,
      'Lange': value * 2.07523 - 14.2499,
      'Leiden': value - 253,
      'Ludolf': value * .623782 - 19.961,
      'Mariotte': value * .389 - 9.5,
      'Miles': value / 1.8,
      'Murray': value * .403226 - 39.9194,
      'Newton [°N]': value / .33,
      'Oertel': value / .9 - 35.5556,
      'Paris': value * .583333 - 16.3333,
      'Poleni': value * 6.58915 - 312.016,
      'Rankine [°Ra]': (value - 491.67) / 1.8,
      'Réaumur [°Ré]': value * 1.25,
      'Richter': value * 1.21766 - 21.9178,
      'Rinaldini': value / .12,
      'Rømer [°Rø]': (value - 7.5) * 40 / 21,
      'Sagredo': value * .211 - 21.1,
      'Sulzer': value * .636637 + .684685,
      'Urist [°U]': (value - 10000) / 1.8,
      'Wedgwood (modern)': value * 24.8572 + 269,
      'Wedgwood (original)': value * 72.2219 + 580.8,
    };
}
